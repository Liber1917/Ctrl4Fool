## 信号流图作为引入mason增益公式的中介
信号流图作用和系统动态结构图类似，不过采取节点和边的方式，图上没有框图中的传递函数，而仅用标注传递函数的边来代替，与此同时节点代表了信号。

**信号流图**是一种用图线表示线性系统方程组的方法。

![[1-6 系统信号流图.png]]

同样地，当借助[[数学工具：拉氏变换]]将线性微分方程组转换为代数方程组后，我们更容易通过各个小模块的信号关系(来源去向等)来刻画整体信号的流动。
$$\begin{aligned}x_{2}&=ax_1+bx_3+gx_5\\{x_3}&=cx_{2}\\x_{4}&=dx_1+ex_3+fx_4\\x_{5}&=hx_{4}\end{aligned}$$
这里右侧变量为输入信号，左侧变量为输出信号，系数则为传递函数，注意这里符号直接标在传递函数上而不是两条边汇入的位置。

与系统动态结构图类似，我们以自然语言为媒介描述系统信号流图也会使用一些术语。

| 术语                              | 定义                                          |
| ------------------------------- | ------------------------------------------- |
| 源点 (Source)                     | **只有输出**支路的节点，表示系统的输入变量。                    |
| 汇点 (Sink)                       | **只有输入**支路的节点，表示系统的输出变量。                    |
| 混合节点                            | 既有输入支路也有输出支路的节点。                            |
| 通路 (Path)                       | 从某一节点开始，沿支路箭头方向经过各相连支路到另一个节点（或同一个节点）构成的路径。  |
| 开通路 (Forward Path)              | 从源点开始并终止于汇点且与其他节点相交不多于一次的通路。                |
| 闭通路 (Closed Path/Loop)          | 终点就是起点的通路，并且与其他任何节点相交不多于一次的通路称为闭通路或回环。      |
| 回环传递函数 (Loop Transfer Function) | 回环中各支路传递函数的乘积称为回环传递函数（或称回环增益）。              |
| 前向通路 (Forward Path)             | 从源点开始并终止于汇点且与其他节点相交不多于一次的通路，其传递函数为前向通路传递函数。 |
| 不接触回环 (Non-Touching Loops)      | 各回环之间没有任何**==公共节点==**的回环。                   |
| 接触回环 (Touching Loops)           | 至少有一个公共节点的回环。                               |
同理，我们可以通过信号不变的原则对信号流图进行等效变换。具体流程与[[1-5 两级滤波回路结构图变换.png]]类似。

## mason增益公式

既然经过简化后得到的，仅由边和节点关系构成的信号流图具备一定的拓扑结构，那么利用拓扑方法我们也能得到一定的结论。**mason增益公式**便是==利用拓扑方法求出系统总传递函数的数学方法==。当然不排除求指定误差或扰动到指定输出的传递函数，只要它们是源点和汇点。

$T=\frac{X_\mathrm{c}}{X_\mathrm{r}}=\frac{1}{\Delta}\sum_{k=1}^nT_k\Delta_k$

公式的各个项代表了公式对于信号流图在[拓扑学](https://zh.wikipedia.org/wiki/%E6%8B%93%E6%89%91%E5%AD%A6)意义上的考察(例如数环的个数、判断通路等)。下面进行详细介绍。

| 定义                                            | 数学表达式                                                                   |
| --------------------------------------------- | ----------------------------------------------------------------------- |
| 系统的输入量                                        | $X_r$                                                                   |
| 系统的输出量                                        | $X_c$                                                                   |
| 系统的总传递函数                                      | $T$                                                                     |
| 第$k$ 条前向通道的传递函数                               | $T_k$                                                                   |
| 前向通路数                                         | $n$                                                                     |
| 信号流图的特征式，各项符号交替排布                             | $\Delta = 1 - \sum L_1 + \sum L_2 - \sum L_3 + \cdots + (-1)^m\sum L_m$ |
| 所有不同回环的传递函数之和                                 | $\sum L_1$                                                              |
| 每两个互不接触回环的传递函数乘积之和                            | $\sum L_2$                                                              |
| 每三个互不接触回环的传递函数乘积之和                            | $\sum L_3$                                                              |
| $m$ 个互不接触回环的传递函数乘积之和                          | $\sum L_m$                                                              |
| 第$k$ 条通路特征式的余子式，除去第$k$ 条前向通路相接触的各回环传递函数(将其置0) | $\Delta_k$ 在 $\Delta$ 中除去第 $k$ 条前向通路相接触的各回环传递函数                         |

公式的这些组成部分中已经蕴含了使用公式时所需的操作：
1. 确定n条前向通路并给出对应传递函数
2. 考察汇点到源点的每个分支点，找出信号流图中的所有回环以及对应的传递函数
3. 求出信号流图的特征式，这个过程中必然会用到并得到其他指标
4. 套公式写出总传函
由于这是拓扑学得到的通法，因而无论是信号流图还是动态结构图都可以采用该方法。
